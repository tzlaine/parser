<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>A Trivial Example That Gracefully Handles Whitespace</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../index.html" title="Chapter 1. Boost.Parser (Proposed)">
<link rel="up" href="../tutorial.html" title="Tutorial">
<link rel="prev" href="a_trivial_example.html" title="A Trivial Example">
<link rel="next" href="semantic_actions.html" title="Semantic Actions">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="a_trivial_example.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../tutorial.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="semantic_actions.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_parser__proposed_.tutorial.a_trivial_example_that_gracefully_handles_whitespace"></a><a class="link" href="a_trivial_example_that_gracefully_handles_whitespace.html" title="A Trivial Example That Gracefully Handles Whitespace">A
      Trivial Example That Gracefully Handles Whitespace</a>
</h3></div></div></div>
<p>
        Let's modify the trivial parser we just saw to ignore any spaces it might
        find among the <code class="computeroutput"><span class="keyword">double</span></code>s and commas.
        To skip whitespace wherever we find it, we can pass a <span class="emphasis"><em>skip parser</em></span>
        to our call to <code class="computeroutput"><a class="link" href="../../boost/parser/parse_idm24733.html" title="Function template parse">parse()</a></code> (we don't need to touch
        the parser passed to <code class="computeroutput"><a class="link" href="../../boost/parser/parse_idm24733.html" title="Function template parse">parse()</a></code>).
        Here, we use <code class="computeroutput"><span class="identifier">ws</span></code>, which matches
        any Unicode whitespace character.
      </p>
<p>
</p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">parser</span><span class="special">/</span><span class="identifier">parser</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">string</span><span class="special">&gt;</span>


<span class="keyword">namespace</span> <span class="identifier">bp</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">parser</span><span class="special">;</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Enter a list of doubles, separated by commas.  No pressure. "</span><span class="special">;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">input</span><span class="special">;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">getline</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cin</span><span class="special">,</span> <span class="identifier">input</span><span class="special">);</span>

    <span class="keyword">auto</span> <span class="keyword">const</span> <span class="identifier">result</span> <span class="special">=</span> <span class="identifier">bp</span><span class="special">::</span><span class="identifier">parse</span><span class="special">(</span><span class="identifier">input</span><span class="special">,</span> <span class="identifier">bp</span><span class="special">::</span><span class="identifier">double_</span> <span class="special">%</span> <span class="char">','</span><span class="special">,</span> <span class="identifier">bp</span><span class="special">::</span><span class="identifier">ws</span><span class="special">);</span>

    <span class="keyword">if</span> <span class="special">(</span><span class="identifier">result</span><span class="special">)</span> <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Great! It looks like you entered:\n"</span><span class="special">;</span>
        <span class="keyword">for</span> <span class="special">(</span><span class="keyword">double</span> <span class="identifier">x</span> <span class="special">:</span> <span class="special">*</span><span class="identifier">result</span><span class="special">)</span> <span class="special">{</span>
            <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">x</span> <span class="special">&lt;&lt;</span> <span class="string">"\n"</span><span class="special">;</span>
        <span class="special">}</span>
    <span class="special">}</span> <span class="keyword">else</span> <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span>
            <span class="special">&lt;&lt;</span> <span class="string">"Good job!  Please proceed to the recovery annex for cake.\n"</span><span class="special">;</span>
    <span class="special">}</span>
<span class="special">}</span>
</pre>
<p>
      </p>
<div class="tip"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../../images/tip.png"></td>
<th align="left">Tip</th>
</tr>
<tr><td align="left" valign="top"><p>
          Even though there is another parser <code class="computeroutput"><span class="identifier">ascii</span><span class="special">::</span><span class="identifier">space</span></code>
          that we could have used here, and even though we know we're in a non-Unicode
          parsing context here from the <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span></code>
          input, I did not use <code class="computeroutput"><span class="identifier">ascii</span><span class="special">::</span><span class="identifier">space</span></code>.
          The <code class="computeroutput"><span class="identifier">ascii</span><span class="special">::</span></code>
          namespace parsers exist mostly to aid porting from Boost.Spirit. They are
          inherently dangerous in a Unicode environment, since they use the <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">is</span><span class="special">*()</span></code>
          functions (like <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">isspace</span><span class="special">()</span></code>).
          <code class="computeroutput"><span class="identifier">ws</span></code> is correct, plus it
          is written in such a way that it matches the ASCII subset of values first,
          meaning it is no less efficient to use for parsing ASCII than <code class="computeroutput"><span class="identifier">ascii</span><span class="special">::</span><span class="identifier">space</span></code>.
        </p></td></tr>
</table></div>
<p>
        The skip parser, or <span class="emphasis"><em>skipper</em></span>, is run between the subparsers
        within the parser passed to <code class="computeroutput"><a class="link" href="../../boost/parser/parse_idm24733.html" title="Function template parse">parse()</a></code>.
        In this case, the skipper is run before the first <code class="computeroutput"><span class="keyword">double</span></code>
        is parsed, before any subsequent comma or <code class="computeroutput"><span class="keyword">double</span></code>
        is parsed, and at the end. So, the strings <code class="computeroutput"><span class="string">"3.6,5.9"</span></code>
        and <code class="computeroutput"><span class="string">" 3.6 , \t 5.9 "</span></code>
        are parsed the same by this program.
      </p>
<p>
        Skipping is an important concept in Boost.Parser. You can skip anything,
        not just whitespace; there are lots of other things you might want to skip.
        The skipper you pass to <code class="computeroutput"><a class="link" href="../../boost/parser/parse_idm24733.html" title="Function template parse">parse()</a></code>
        can be an arbitrary parser. For example, if you write a parser for a scripting
        language, you can write a skipper to skip whitespace, inline comments, and
        end-of-line comments.
      </p>
<p>
        We'll be using skip parsers almost exclusively in the rest of the documentation.
        The ability to ignore the parts of your input that you don't care about is
        so convenient that parsing without skipping is a rarity in practice.
      </p>
</div>
<div class="copyright-footer">Copyright © 2020 T. Zachary Laine<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="a_trivial_example.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../tutorial.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="semantic_actions.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
